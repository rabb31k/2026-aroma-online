<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2026 台灣精油芳療年會 | 光影流芳 五行共生</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (CDN for standalone usage) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons (CDN) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- HTML2Canvas (for image generation) -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- Tailwind Config for Custom Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                        serif: ['"Noto Serif TC"', 'serif'],
                    },
                    colors: {
                        'el-wood': '#8b934e',
                        'el-fire': '#943425',
                        'el-earth': '#865f41',
                        'el-metal': '#deab47',
                        'el-water': '#589da9',
                    }
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        body { margin: 0; padding: 0; overflow-x: hidden; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1c1917; }
        ::-webkit-scrollbar-thumb { background: #57534e; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a29e; }

        /* Animations */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.8s ease-out forwards;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.7; }
        }
        .animate-pulse-slow {
            animation: pulse-slow 3s infinite;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
<script type="importmap">
{
  "imports": {
    "vite": "https://aistudiocdn.com/vite@^7.2.7",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
</head>
<body class="bg-stone-50 text-stone-800 selection:bg-amber-200 selection:text-amber-900">

    <!-- Navigation -->
    <nav id="navbar" class="fixed top-0 left-0 w-full z-50 transition-all duration-300 py-6 bg-transparent">
        <div class="container mx-auto px-6 md:px-12 lg:px-20 flex justify-between items-center text-white">
            <!-- Logo -->
            <div class="flex items-center space-x-2 cursor-pointer" onclick="scrollToSection('hero')">
                <div class="bg-gradient-to-tr from-yellow-400 to-amber-600 p-2 rounded-full">
                    <i data-lucide="flower-2" class="w-6 h-6 text-white"></i>
                </div>
                <div class="flex flex-col">
                    <span class="font-serif text-lg font-bold leading-none tracking-widest">AROMATHERAPY</span>
                    <span class="text-[10px] tracking-wider opacity-80">2026 CONFERENCE</span>
                </div>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <button onclick="scrollToSection('calculator')" class="hover:text-amber-400 transition-colors text-sm tracking-widest">生命靈數計算</button>
                <button onclick="scrollToSection('exhibition')" class="hover:text-amber-400 transition-colors text-sm tracking-widest">線上展覽</button>
            </div>

            <!-- Mobile Toggle -->
            <div class="md:hidden">
                <button id="mobile-menu-btn" class="text-white">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-stone-900 border-t border-stone-800 p-6 flex flex-col space-y-4 shadow-xl">
            <button onclick="scrollToSection('calculator')" class="text-left text-white hover:text-amber-400 py-2">生命靈數計算</button>
            <button onclick="scrollToSection('exhibition')" class="text-left text-white hover:text-amber-400 py-2">線上展覽</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="relative w-full min-h-screen flex flex-col justify-start overflow-hidden bg-stone-900 pt-28 md:pt-32">
        <!-- Background -->
        <div class="absolute inset-0 z-0">
            <img src="https://picsum.photos/id/132/1920/1080" alt="Background" class="w-full h-full object-cover opacity-60">
            <div class="absolute inset-0 bg-gradient-to-br from-stone-900 via-amber-900/40 to-emerald-900/60 mix-blend-overlay"></div>
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-stone-900/20 to-stone-900"></div>
            
            <!-- Animated Blobs -->
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-amber-500/20 rounded-full blur-[100px] animate-pulse-slow"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-emerald-500/20 rounded-full blur-[100px] animate-pulse-slow" style="animation-delay: 1s;"></div>
        </div>

        <!-- Content Container -->
        <!-- Adjusted padding: pb-48 for mobile to ensure text doesn't hit the scroll indicator -->
        <div class="relative z-10 container mx-auto px-6 md:px-12 lg:px-20 grid md:grid-cols-2 gap-12 items-center pb-48 md:pb-20">
            
            <!-- Left Column (Mobile: Top, Centered) -->
            <div class="space-y-8 animate-fade-in-up flex flex-col items-center md:items-start text-center md:text-left">
                <!-- Counter -->
                <div class="flex items-center space-x-3 glass-card w-fit px-4 py-2 rounded-full">
                    <div class="flex -space-x-2">
                        <div class="w-8 h-8 rounded-full bg-emerald-400 flex items-center justify-center border-2 border-stone-800"><i data-lucide="user" class="w-4 h-4 text-white"></i></div>
                        <div class="w-8 h-8 rounded-full bg-amber-400 flex items-center justify-center border-2 border-stone-800"><i data-lucide="users" class="w-4 h-4 text-white"></i></div>
                        <div class="w-8 h-8 rounded-full bg-blue-400 flex items-center justify-center border-2 border-stone-800"><i data-lucide="user-plus" class="w-4 h-4 text-white"></i></div>
                    </div>
                    <span class="text-white text-sm font-medium">已有 <span class="text-amber-400 font-bold">2,680</span> 位芳療師參與體驗</span>
                </div>

                <!-- Title -->
                <div class="space-y-4">
                    <h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-serif text-white font-bold leading-tight drop-shadow-lg">
                        <span class="block mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-amber-100">光影流芳</span>
                        <span class="block text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-emerald-200">五行共生</span>
                    </h1>
                    <p class="text-lg sm:text-xl md:text-2xl text-amber-100/80 tracking-widest font-light">
                        2026 台灣精油芳療年會
                    </p>
                </div>

                <!-- CTA (Moved Up) -->
                <button onclick="scrollToSection('calculator')" class="group bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 text-white px-8 py-4 rounded-full text-lg font-bold tracking-wider shadow-lg shadow-amber-900/50 transition-all duration-300 flex items-center gap-2 transform hover:-translate-y-1">
                    開始探索你的五行能量
                    <i data-lucide="chevron-down" class="w-5 h-5 group-hover:translate-y-1 transition-transform"></i>
                </button>

                <!-- Description (Mobile Only) -->
                <!-- Show only on mobile (md:hidden) -->
                <div class="glass-card p-6 rounded-3xl text-white/90 shadow-2xl backdrop-blur-md border border-white/20 md:hidden w-full max-w-lg">
                    <p class="text-base leading-relaxed font-light">
                        每個人都有專屬的五行能量密碼，透過生命靈數，找到你與精油的共振頻率。在光影交織中，感受<span class="text-emerald-300 font-medium">木的生發</span>、<span class="text-red-300 font-medium">火的熱情</span>、<span class="text-yellow-300 font-medium">土的穩定</span>、<span class="text-gray-300 font-medium">金的收斂</span>、<span class="text-blue-300 font-medium">水的流動</span>。
                    </p>
                </div>
            </div>

            <!-- Right Column (Desktop Only) -->
            <!-- Show only on desktop (hidden md:block) -->
            <div class="hidden md:block animate-fade-in-up" style="animation-delay: 0.2s;">
                <div class="glass-card p-8 rounded-3xl text-white/90 shadow-2xl max-w-md ml-auto transform rotate-1 hover:rotate-0 transition-transform duration-500">
                    <p class="text-lg leading-relaxed font-light">
                        每個人都有專屬的五行能量密碼，透過生命靈數，找到你與精油的共振頻率。在光影交織中，感受<span class="text-emerald-300 font-medium">木的生發</span>、<span class="text-red-300 font-medium">火的熱情</span>、<span class="text-yellow-300 font-medium">土的穩定</span>、<span class="text-gray-300 font-medium">金的收斂</span>、<span class="text-blue-300 font-medium">水的流動</span>。
                    </p>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 text-white/50 flex flex-col items-center animate-bounce z-20">
            <span class="text-xs tracking-widest mb-2">向下探索</span>
            <i data-lucide="chevron-down" class="w-6 h-6"></i>
        </div>
    </section>

    <!-- Calculator Section -->
    <section id="calculator" class="py-24 bg-stone-50 overflow-hidden relative">
        <!-- Decor -->
        <div class="absolute top-0 right-0 w-64 h-64 bg-el-wood/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-el-metal/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"></div>

        <div class="container mx-auto px-6 md:px-12 lg:px-20 relative z-10">
            <div class="flex flex-col items-center mb-16">
                <h2 class="text-6xl md:text-9xl font-serif text-stone-800 opacity-10 absolute top-[-40px] select-none">01</h2>
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-stone-800 mb-4 relative">生命靈數計算</h2>
                <div class="w-24 h-1 bg-gradient-to-r from-el-wood to-el-metal"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-12 lg:gap-24 items-start max-w-6xl mx-auto">
                <!-- Form -->
                <div class="bg-white p-8 md:p-12 rounded-3xl shadow-xl shadow-stone-200/50 border border-stone-100 sticky top-24">
                    <h3 class="text-xl text-stone-600 mb-8 font-medium">請選擇您的西元出生日期</h3>
                    <div class="space-y-6">
                        <div class="space-y-2">
                            <label class="text-sm text-stone-500 font-medium tracking-wide">年份</label>
                            <div class="relative">
                                <select id="year-select" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 appearance-none focus:outline-none focus:ring-2 focus:ring-el-wood text-stone-700">
                                    <option value="" disabled selected>選擇年份</option>
                                    <!-- Options populated by JS -->
                                </select>
                                <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 w-5 h-5 pointer-events-none"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm text-stone-500 font-medium tracking-wide">月份</label>
                            <div class="relative">
                                <select id="month-select" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 appearance-none focus:outline-none focus:ring-2 focus:ring-el-wood text-stone-700">
                                    <option value="" disabled selected>選擇月份</option>
                                    <!-- Options populated by JS -->
                                </select>
                                <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 w-5 h-5 pointer-events-none"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm text-stone-500 font-medium tracking-wide">日期</label>
                            <div class="relative">
                                <select id="day-select" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 appearance-none focus:outline-none focus:ring-2 focus:ring-el-wood text-stone-700">
                                    <option value="" disabled selected>選擇日期</option>
                                    <!-- Options populated by JS -->
                                </select>
                                <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 text-stone-400 w-5 h-5 pointer-events-none"></i>
                            </div>
                        </div>

                        <button onclick="calculateElement()" class="w-full bg-emerald-700 hover:bg-emerald-800 text-white font-bold py-4 rounded-xl transition-all duration-300 shadow-lg shadow-emerald-900/20 mt-4">
                            計算我的五行屬性
                        </button>
                    </div>
                </div>

                <!-- Result Container -->
                <div id="result-container" class="flex flex-col items-center justify-center min-h-[400px] w-full">
                    <!-- Default Static Icons -->
                    <div id="static-icons" class="flex flex-col gap-6 items-center justify-center h-full min-h-[400px]">
                        <div class="grid grid-cols-5 gap-3 md:gap-6 w-full max-w-lg">
                            <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-wood flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="leaf" class="text-white"></i></div><span class="text-el-wood font-bold">木</span></div>
                            <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-fire flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="flame" class="text-white"></i></div><span class="text-el-fire font-bold">火</span></div>
                            <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-earth flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="mountain" class="text-white"></i></div><span class="text-el-earth font-bold">土</span></div>
                            <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-metal flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="diamond" class="text-white"></i></div><span class="text-el-metal font-bold">金</span></div>
                            <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-water flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="droplets" class="text-white"></i></div><span class="text-el-water font-bold">水</span></div>
                        </div>
                        <p class="text-xl text-stone-500 font-serif mt-4 text-center">選擇你的生日，開啟專屬五行之旅</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Exhibition Section -->
    <section id="exhibition" class="py-24 bg-white">
        <div class="container mx-auto px-6 md:px-12 lg:px-20">
            <div class="text-center mb-20 space-y-4">
                <span class="bg-amber-100 text-amber-800 px-4 py-1 rounded-full text-sm font-bold tracking-wider">線上虛擬展覽</span>
                <h2 class="text-4xl md:text-6xl font-serif font-bold text-stone-800">
                    沉浸式五行體驗<br/>
                    <span class="text-stone-600 italic text-3xl md:text-5xl mt-2 block">探索光影流芳的奧秘</span>
                </h2>
                <p class="text-stone-500 max-w-2xl mx-auto pt-4">
                    透過虛擬實境技術，在家也能身歷其境參與年會展覽。每個展區都對應不同的五行能量，等待您的探索。
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="exhibition-grid">
                <!-- Cards Injected by JS -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer" class="bg-stone-900 text-stone-400 py-16">
        <div class="container mx-auto px-6 md:px-12 lg:px-20">
            <div class="grid md:grid-cols-4 gap-12 mb-12 border-b border-stone-800 pb-12">
                <div class="col-span-1 md:col-span-2 space-y-4">
                    <h3 class="text-white text-2xl font-serif">2026 台灣精油芳療年會</h3>
                    <p class="text-sm leading-relaxed max-w-md">致力於推廣正統芳香療法，結合東方五行哲學與西方科學實證，為現代人尋找身心平衡的自然處方。</p>
                </div>
                <div class="space-y-4">
                    <h4 class="text-white font-bold tracking-wider text-sm uppercase">快速連結</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-amber-500">大會議程</a></li>
                        <li><a href="#" class="hover:text-amber-500">講師陣容</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h4 class="text-white font-bold tracking-wider text-sm uppercase">聯絡我們</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-amber-600 hover:text-white"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-amber-600 hover:text-white"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    </div>
                </div>
            </div>
            <div class="flex justify-between text-xs">
                <p>&copy; 2026 Taiwan Aromatherapy Conference.</p>
            </div>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // Data Definitions
        const EXHIBITION_DATA = [
            {
                id: 'prologue',
                title: "光影序章",
                subtitle: "了解五行哲學與芳療的連結",
                tag: "前導區域",
                color: "text-white",
                bgGradient: "from-stone-800 to-stone-600",
                imageUrl: "https://images.unsplash.com/photo-1518066000714-58c45f1a2c0a?auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 'wood',
                title: "木 · 生發之力",
                subtitle: "包含：木之眼力｜文字尋找遊戲",
                tag: "木之展區",
                color: "text-emerald-100",
                bgGradient: "from-el-wood to-emerald-800",
                imageUrl: "https://img.shoplineapp.com/media/image_clips/6939a3813f52684d32c66f3b/original.jpg?1765385089=&owner_id=5caf39294d91a10001727c79" // Updated to User Provided URL
            },
            {
                id: 'fire',
                title: "火 · 熱情之光",
                subtitle: "包含：心火明辨｜數字反應遊戲",
                tag: "火之展區",
                color: "text-orange-100",
                bgGradient: "from-el-fire to-red-900",
                imageUrl: "https://img.shoplineapp.com/media/image_clips/6939a3872d2bf66a426ce590/original.jpg?1765385094=&owner_id=5caf39294d91a10001727c79" // Updated to User Provided URL
            },
            {
                id: 'earth',
                title: "土 · 穩定之基",
                subtitle: "包含：穩脾之力｜巧手分類遊戲",
                tag: "土之展區",
                color: "text-yellow-100",
                bgGradient: "from-el-earth to-amber-900",
                imageUrl: "https://images.unsplash.com/photo-1465056836041-7f43ac27dcb5?auto=format&fit=crop&w=800&q=80" // Kept as Unsplash Mountain
            },
            {
                id: 'metal',
                title: "金 · 收斂之質",
                subtitle: "包含：清氣綿長｜出一口氣遊戲",
                tag: "金之展區",
                color: "text-yellow-100",
                bgGradient: "from-el-metal to-amber-800",
                imageUrl: "https://img.shoplineapp.com/media/image_clips/6939a3961e5e75d00618cd98/original.jpg?1765385110=&owner_id=5caf39294d91a10001727c79" // Kept existing
            },
            {
                id: 'water',
                title: "水 · 流動之韻",
                subtitle: "包含：水之定位｜金雞獨立遊戲",
                tag: "水之展區",
                color: "text-blue-100",
                bgGradient: "from-el-water to-blue-900",
                imageUrl: "https://img.shoplineapp.com/media/image_clips/6939a39d6dc52d7639694521/original.jpg?1765385116=&owner_id=5caf39294d91a10001727c79" // Updated to User Provided URL
            }
        ];

        const ELEMENT_MAPPING = {
            1: { element: "木", constitution: "氣鬱x血瘀", title: "開創者", description: "你是超級行動派，敢冒險、不服輸的開創先鋒。", color: "bg-el-wood", icon: "leaf" },
            2: { element: "水", constitution: "陽虛x特稟", title: "協調者", description: "你是細膩的傾聽者，擅長在人際中成為潤滑劑。", color: "bg-el-water", icon: "droplets" },
            3: { element: "火", constitution: "陰虛x濕熱", title: "協調者", description: "你用熱情點亮世界，擁有點燃氣氛的感染力。", color: "bg-el-fire", icon: "flame" },
            4: { element: "土", constitution: "氣虛x痰濕", title: "穩固者", description: "你是注重細節、務實可靠，能把理想落地的人。", color: "bg-el-earth", icon: "mountain" },
            5: { element: "火", constitution: "陰虛x濕熱", title: "探索者", description: "你對新鮮事物充滿好奇，勇於打破框架前行。", color: "bg-el-fire", icon: "flame" },
            6: { element: "土", constitution: "氣虛x痰濕", title: "照顧者", description: "你樂於照顧他人，是溫暖又包容的療癒存在。", color: "bg-el-earth", icon: "mountain" },
            7: { element: "金", constitution: "氣虛x特稟", title: "思考者", description: "你善於冷靜分析與探索真理，是天生的洞察者。", color: "bg-el-metal", icon: "diamond" },
            8: { element: "金", constitution: "氣虛x特稟", title: "實踐者", description: "你是統籌全局，化理想為現實的執行高手。", color: "bg-el-metal", icon: "diamond" },
            9: { element: "水", constitution: "陽虛x特稟", title: "奉獻者", description: "你有強烈的使命感，願為世界付出與療癒他人。", color: "bg-el-water", icon: "droplets" }
        };

        // DOM Elements
        const navbar = document.getElementById('navbar');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const yearSelect = document.getElementById('year-select');
        const monthSelect = document.getElementById('month-select');
        const daySelect = document.getElementById('day-select');

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            populateDates();
            renderExhibition();
            
            // Scroll Listener
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('bg-stone-900/90', 'backdrop-blur-md', 'shadow-lg', 'py-3');
                    navbar.classList.remove('bg-transparent', 'py-6');
                } else {
                    navbar.classList.remove('bg-stone-900/90', 'backdrop-blur-md', 'shadow-lg', 'py-3');
                    navbar.classList.add('bg-transparent', 'py-6');
                }
            });

            // Mobile Menu
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                const icon = mobileMenu.classList.contains('hidden') ? 'menu' : 'x';
                mobileMenuBtn.innerHTML = `<i data-lucide="${icon}"></i>`;
                lucide.createIcons();
            });
        });

        // Navigation
        function scrollToSection(id) {
            mobileMenu.classList.add('hidden');
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }

        // Populate Date Selects
        function populateDates() {
            // Years: 1940 - 2024
            for (let i = 2024; i >= 1940; i--) {
                const opt = document.createElement('option');
                opt.value = i;
                opt.innerText = i;
                yearSelect.appendChild(opt);
            }
            // Months
            for (let i = 1; i <= 12; i++) {
                const val = String(i).padStart(2, '0');
                const opt = document.createElement('option');
                opt.value = val;
                opt.innerText = val;
                monthSelect.appendChild(opt);
            }
            // Days
            for (let i = 1; i <= 31; i++) {
                const val = String(i).padStart(2, '0');
                const opt = document.createElement('option');
                opt.value = val;
                opt.innerText = val;
                daySelect.appendChild(opt);
            }
        }

        // Render Exhibition Cards
        function renderExhibition() {
            const grid = document.getElementById('exhibition-grid');
            grid.innerHTML = EXHIBITION_DATA.map(item => `
                <div class="group relative overflow-hidden rounded-[2rem] h-[500px] cursor-pointer shadow-xl transition-all duration-500 hover:shadow-2xl hover:-translate-y-2">
                    <img src="${item.imageUrl}" alt="${item.title}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-gradient-to-t ${item.bgGradient} opacity-80 mix-blend-multiply transition-opacity duration-300 group-hover:opacity-90"></div>
                    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/60"></div>
                    <div class="absolute inset-0 p-8 flex flex-col justify-between">
                        <div class="flex justify-start">
                            <span class="bg-white/20 backdrop-blur-md px-4 py-1 rounded-full text-xs font-bold text-white tracking-widest uppercase border border-white/10">${item.tag}</span>
                        </div>
                        <div class="transform translate-y-4 transition-transform duration-500 group-hover:translate-y-0">
                            <h3 class="text-4xl font-serif font-bold mb-2 ${item.color} drop-shadow-md">${item.title}</h3>
                            <p class="text-white/80 text-lg mb-8 font-light tracking-wide">${item.subtitle}</p>
                            <button class="flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-md border border-white/40 text-white px-6 py-3 rounded-full transition-all duration-300 group-hover:pl-8">
                                進入體驗 <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // Calculator Logic
        function calculateElement() {
            const y = yearSelect.value;
            const m = monthSelect.value;
            const d = daySelect.value;

            if (!y || !m || !d) {
                alert("請完整選擇出生年月日");
                return;
            }

            // Logic: Sum all digits
            let fullStr = y + m + d;
            let sum = 0;
            for (let char of fullStr) sum += parseInt(char);

            // Reduce to single digit
            while (sum > 9) {
                let temp = 0;
                String(sum).split('').forEach(n => temp += parseInt(n));
                sum = temp;
            }

            const result = ELEMENT_MAPPING[sum];
            if (result) {
                displayResult(sum, result);
            }
        }

        function displayResult(number, data) {
            const container = document.getElementById('result-container');
            const html = `
                <div class="w-full flex flex-col items-center animate-fade-in-up">
                    <div id="result-card" class="relative w-full max-w-sm ${data.color} text-white rounded-[2rem] shadow-2xl overflow-hidden" style="min-height: 600px;">
                        <div class="pt-8 pb-4 text-center px-6">
                            <h2 class="text-lg font-medium opacity-90 tracking-widest mb-1">2026 台灣精油芳療年會</h2>
                            <h1 class="text-2xl font-serif font-bold tracking-wider">光影流芳 • 五行共生</h1>
                        </div>
                        <div class="w-full h-px bg-white/20 my-2"></div>
                        <div class="p-8 flex flex-col items-center text-center">
                            <div class="relative mb-6">
                                <div class="w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/30">
                                    <i data-lucide="${data.icon}" class="w-12 h-12 text-white"></i>
                                </div>
                                <div class="absolute -bottom-2 -right-2 bg-white text-stone-900 w-10 h-10 rounded-full flex items-center justify-center font-bold text-xl shadow-lg border-2 border-white">${number}</div>
                            </div>
                            <div class="space-y-1 mb-6">
                                <p class="text-lg opacity-90 font-medium">五行屬性：${data.element}</p>
                                <p class="text-lg opacity-90 font-medium">對應體質：${data.constitution}</p>
                            </div>
                            <h3 class="text-4xl font-serif font-bold mb-4">${data.title}</h3>
                            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 w-full">
                                <p class="text-lg leading-relaxed font-light tracking-wide">${data.description}</p>
                            </div>
                        </div>
                        <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"></div>
                    </div>

                    <div class="flex gap-4 mt-8">
                         <button onclick="resetCalculator()" class="flex items-center gap-2 bg-white border border-stone-200 hover:bg-stone-50 text-stone-600 px-6 py-3 rounded-full transition-all shadow-md">
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i> 重新計算
                        </button>
                    </div>
                </div>
            `;
            container.innerHTML = html;
            lucide.createIcons();
        }

        function resetCalculator() {
            yearSelect.value = "";
            monthSelect.value = "";
            daySelect.value = "";
            
            // Restore Static Icons
            const container = document.getElementById('result-container');
            container.innerHTML = `
                <div id="static-icons" class="flex flex-col gap-6 items-center justify-center h-full min-h-[400px] animate-fade-in-up">
                    <div class="grid grid-cols-5 gap-3 md:gap-6 w-full max-w-lg">
                        <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-wood flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="leaf" class="text-white"></i></div><span class="text-el-wood font-bold">木</span></div>
                        <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-fire flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="flame" class="text-white"></i></div><span class="text-el-fire font-bold">火</span></div>
                        <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-earth flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="mountain" class="text-white"></i></div><span class="text-el-earth font-bold">土</span></div>
                        <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-metal flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="diamond" class="text-white"></i></div><span class="text-el-metal font-bold">金</span></div>
                        <div class="flex flex-col items-center gap-2"><div class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-el-water flex items-center justify-center shadow-lg border-2 border-white"><i data-lucide="droplets" class="text-white"></i></div><span class="text-el-water font-bold">水</span></div>
                    </div>
                    <p class="text-xl text-stone-500 font-serif mt-4 text-center">選擇你的生日，開啟專屬五行之旅</p>
                </div>
            `;
            lucide.createIcons();
        }
    </script>
</body>
</html>
